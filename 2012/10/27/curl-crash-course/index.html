<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1.0, viewport-fit=cover' name='viewport'>
<link href='/feed.xml' rel='alternate' title="Tomasz Pewiński's blog" type='application/rss+xml'>
<link href='/favicon.ico' rel='shortcut icon'>
<link href='//fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
<link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css'>
<link href='/stylesheets/style.css' rel='stylesheet' type='text/css'>
<title>Curl crash course | Tomasz Pewiński</title>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27002819-3']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
<div class='root'>
<header class='site-header--collapsed'>
<div class='surprise'></div>
<div class='container'>
<a href='/'>
<h1 class='site-header__title'>Tomasz Pewinski</h1>
</a>
<nav class='navigation'>
<ul class='navigation__items'>
<li class='navigation__item'>
<a href='/about'>about me</a>
</li>
<li class='navigation__item'>
<a href='https://github.com/pewniak747' target='_blank'>github</a>
</li>
<li class='navigation__item'>
<a href='https://linkedin.com/pub/tomasz-pewiński/70/955/94' target='_blank'>linkedin</a>
</li>
<li class='navigation__item'>
<a href='/feed.xml'>rss</a>
</li>
</ul>
</nav>
</div>
</header>
<section class='container'>
<article class='article'>
<section class='article-header'>
<h1 class='article-header__title'>
<a href='/2012/10/27/curl-crash-course/'>Curl crash course</a>
</h1>
<time class='article-header__date' pubdate=''>27 Oct 2012</time>
</section>
<section class='article-content'><p>Debugging web services is a common task for web developer. Sometimes you want to have more control on the request you&rsquo;re making - hitting reload in your browser might not be enough. That&rsquo;s where curl comes in.</p>

<p>If you&rsquo;re a web-dev you heard of it for sure, but maybe didn&rsquo;t have time to read a lengthy man page and learn how to use it in day-to-day development. In this article I&rsquo;ll show most useful ways of using curl.</p>

<p>If you&rsquo;re running a linux distribution, curl is available through your system&rsquo;s package manager.</p>

<h2>Basic usage</h2>

<p>It&rsquo;s as simple as <code>curl your-url</code>. By default a body of HTTP response will be printed to <code>stdout</code>.</p>
<pre class="highlight plaintext"><code>curl http://pewniak747.info
</code></pre>
<p>Adding -v is very useful - it lets you see whole HTTP request &amp; response, and debug information:</p>
<pre class="highlight plaintext"><code>curl -v http://pewniak747.info

* About to connect() to pewniak747.info port 80 (#0)
*   Trying 74.117.156.115... connected
&gt; GET / HTTP/1.1
&gt; User-Agent: curl/7.22.0 (x86_64-pc-linux-gnu)
&gt; Host: pewniak747.info
&gt; Accept: */*
&gt; 
&lt; HTTP/1.1 200 OK
&lt; Server: nginx/1.1.4
&lt; Date: Sat, 27 Oct 2012 19:09:07 GMT
&lt; Content-Type: text/html
&lt; Content-Length: 5178
&lt; Last-Modified: Sat, 27 Oct 2012 13:30:31 GMT
&lt; Connection: keep-alive
&lt; Accept-Ranges: bytes

</code></pre>
<h2>Advanced usage</h2>

<p>Changing HTTP method (default is GET)</p>
<pre class="highlight shell"><code>curl -X PUT http://api.example.com/endpoint
</code></pre>
<p>Query parameters:</p>
<pre class="highlight shell"><code>curl http://api.example.com/endpoint?param<span class="o">=</span>value
</code></pre>
<p>Sending data in request body (with <code>Content-Type: application/x-www-form-urlencoded</code> header):</p>
<pre class="highlight shell"><code>curl -d <span class="s1">'param=value'</span> -d <span class="s1">'param2=other_value'</span> http://api.example.com/endpoint
</code></pre>
<p>(Note that adding <code>-X POST</code> is not necessary - curl automatically assumes a POST)</p>

<p>To simulate a <code>Content-Type: multipart/form-data</code> (form submitted by browser) use <code>-F</code> instead of <code>-d</code>.</p>
<pre class="highlight shell"><code>curl -F <span class="s1">'param=value'</span> -F <span class="s1">'param2=other_value'</span> http://api.example.com/endpoint
</code></pre>
<p>Sending a file in the form:</p>
<pre class="highlight shell"><code>curl -F <span class="s1">'photo=@/path/to/file'</span> http://api.example.com/endpoint
</code></pre>
<p>Adding headers:</p>
<pre class="highlight shell"><code>curl -H <span class="s2">"Authorization: b97e1222abe974191dfc65c8e2b2eb6b"</span> http://api.example.com/endpoint
</code></pre>
<p>Sending a cookie:</p>
<pre class="highlight shell"><code>curl -b <span class="s2">"session_id=4337a82f37c7218e41931b9bcc60c943"</span> http://api.example.com/endpoint
</code></pre>
<p>Fetching headers only (using HTTP HEAD method - can be handy if response body is long):</p>
<pre class="highlight shell"><code>curl -I http://api.example.com/endpoint
</code></pre>
<h2>Debugging JSON</h2>

<p>I recommend to install <a href="https://github.com/smgt/colorful_json">colorful_json</a> gem - piping curl to <code>cjson</code> will nicely format the output:</p>
<pre class="highlight shell"><code>curl https://api.flattr.com/rest/v2/users/smgt/things | cjson

<span class="o">[</span>
  <span class="o">{</span>
    <span class="s2">"type"</span>: <span class="s2">"thing"</span>,
    <span class="s2">"resource"</span>: <span class="s2">"https://api.flattr.com/rest/v2/things/958860"</span>,
    <span class="s2">"link"</span>: <span class="s2">"https://flattr.com/thing/958860"</span>,
    <span class="s2">"id"</span>: 958860
  <span class="o">}</span>
<span class="o">]</span>
...
</code></pre>
<p>That&rsquo;s all! I hope you learned useful ways of using curl to debug web services. Do you know other useful curl tricks, or use other tools to aid HTTP debugging? Let me know in the comments!</p>
</section>
<section class='article-comments'><div id='disqus_thread'></div>
<script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'pewniak747-info'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>
Please enable JavaScript to view the
<a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
</noscript>
<a class='dsq-brlink' href='http://disqus.com'>
comments powered by
<span class='logo-disqus'>Disqus</span>
</a>
</section>
</article>

</section>
</div>
<script>
  (function() {
    var active = false;
    var doc = document.documentElement;
    var element = document.querySelector('.surprise');
    var color = "#353277";
  
    function clamp(min, max, value) {
      return Math.min(max, Math.max(min, value));
    }
  
    function onscroll(event) {
      var scrollY = window.scrollY;
  
      if (scrollY < 0) {
        if (!active) {
          doc.style['background'] = color;
          element.textContent = "hello!";
          active = true;
        }
        var margin = clamp(-90, 0, -90 - scrollY);
        element.style['margin-top'] = margin + "px";
      } else if (scrollY > 0 && active) {
        doc.style['background'] = "none";
        active = false;
      }
    }
    window.addEventListener('scroll', onscroll, { passive: true });
  })();
</script>
</body>
</html>
