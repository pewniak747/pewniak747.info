<!DOCTYPE html>
<html>
<head>
<meta charset='utf-8'>
<meta content='IE=edge;chrome=1' http-equiv='X-UA-Compatible'>
<meta content='width=device-width, initial-scale=1.0' name='viewport'>
<link href='/feed.xml' rel='alternate' title="Tomasz Pewiński's blog" type='application/rss+xml'>
<link href='/favicon.ico' rel='shortcut icon'>
<link href='http://fonts.googleapis.com/css?family=Inconsolata' rel='stylesheet' type='text/css'>
<link href='/stylesheets/syntax.css' rel='stylesheet' type='text/css'>
<link href='/stylesheets/style.css' rel='stylesheet' type='text/css'>
<title>Coffeescript's existential operator | Tomasz Pewiński</title>
<script>
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-27002819-3']);
  _gaq.push(['_trackPageview']);
  
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

</head>
<body>
<div id='container'>
<header>
<a href='/' id='home'>
<h1>Tomasz Pewinski</h1>
</a>
<nav>
<ul>
<li>
<a href='/'>blog</a>
</li>
<li>&middot;</li>
<li>
<a href='/feed.xml'>rss feed</a>
</li>
<li>&middot;</li>
<li>
<a href='/about'>about me</a>
</li>
<li>&middot;</li>
<li>
<a href='https://twitter.com/pewniak747' target='_blank'>twitter</a>
</li>
<li>&middot;</li>
<li>
<a href='https://github.com/pewniak747' target='_blank'>github</a>
</li>
<li>&middot;</li>
<li>
<a href='https://linkedin.com/pub/tomasz-pewiński/70/955/94' target='_blank'>linkedin</a>
</li>
</ul>
</nav>
</header>
<section id='content'>
<article>
<section class='heading'>
<h1 class='title'>
<a href='/2013/08/24/coffeescripts-existential-operator/'>Coffeescript's existential operator</a>
</h1>
<time class='date' pubdate=''>24 Aug 2013</time>
<div class='clearfix'></div>
</section>
<section class='content'><p>Love it or hate it, coffeescript does make your front-end javascript code more concise. And one of its great features is existential operator, which helps to remove most of <code>null</code> and <code>undefined</code> checks. Let&rsquo;s see how it works:</p>

<p>In its basic form, it&rsquo;s pretty self-explainatory.</p>
<pre class="highlight coffeescript"><code><span class="k">if</span> <span class="nx">variable</span><span class="o">?</span>
  <span class="c1"># do something</span>
</code></pre><pre class="highlight javascript"><code><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">variable</span> <span class="o">!==</span> <span class="s2">"undefined"</span> <span class="o">&amp;&amp;</span> <span class="nx">variable</span> <span class="o">!==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// do something</span>
<span class="p">}</span>
</code></pre>
<p>You can chain these checks for deep object lookup:</p>
<pre class="highlight coffeescript"><code><span class="nx">object</span><span class="o">?</span><span class="p">.</span><span class="na">property</span><span class="o">?</span><span class="p">.</span><span class="na">subproperty</span><span class="o">?</span>
</code></pre>
<p>But there&rsquo;s more. Run a function only if it&rsquo;s defined:</p>
<pre class="highlight coffeescript"><code><span class="nx">object</span><span class="p">.</span><span class="na">function</span><span class="o">?</span><span class="p">()</span>
</code></pre><pre class="highlight javascript"><code><span class="k">if</span> <span class="p">(</span><span class="k">typeof</span> <span class="nx">object</span><span class="p">.</span><span class="nx">property</span> <span class="o">===</span> <span class="s2">"function"</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">object</span><span class="p">.</span><span class="nx">property</span><span class="p">();</span>
<span class="p">}</span>
</code></pre>
<p>Or lookup an array ony if it&rsquo;s defined: (this one does not check if property is an array though)</p>
<pre class="highlight coffeescript"><code><span class="nx">object</span><span class="p">.</span><span class="na">property</span><span class="o">?</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</code></pre><pre class="highlight javascript"><code><span class="kd">var</span> <span class="nx">_ref</span><span class="p">;</span>
<span class="k">if</span> <span class="p">((</span><span class="nx">_ref</span> <span class="o">=</span> <span class="nx">object</span><span class="p">.</span><span class="nx">property</span><span class="p">)</span> <span class="o">!=</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">_ref</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
<span class="p">}</span>
</code></pre>
<p>Existential operator can be used in assignment:</p>
<pre class="highlight coffeescript"><code><span class="nx">object</span><span class="p">.</span><span class="na">property</span> <span class="o">?=</span> <span class="s">'value'</span>
</code></pre><pre class="highlight javascript"><code><span class="k">if</span> <span class="p">(</span><span class="nx">object</span><span class="p">.</span><span class="nx">property</span> <span class="o">==</span> <span class="kc">null</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">object</span><span class="p">.</span><span class="nx">property</span> <span class="o">=</span> <span class="s1">'value'</span><span class="p">;</span>
<span class="p">}</span>
</code></pre>
<p>It only assigns when property is not defined. It&rsquo;s especially handy for boolean variables - let&rsquo;s compare this to <code>||=</code> operator:</p>
<pre class="highlight coffeescript"><code><span class="c1"># ||= operator</span>
<span class="nx">variable</span> <span class="o">=</span> <span class="no">false</span>
<span class="nx">variable</span> <span class="o">||=</span> <span class="s">'value'</span>
<span class="nx">variable</span> <span class="c1"># =&gt; 'value'</span>

<span class="c1"># ?= operator</span>
<span class="nx">variable2</span> <span class="o">=</span> <span class="no">false</span>
<span class="nx">variable2</span> <span class="o">?=</span> <span class="s">'value'</span>
<span class="nx">variable2</span> <span class="c1"># =&gt; false</span>
</code></pre></section>
<section class='comments'><div id='disqus_thread'></div>
<script>
  /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
  var disqus_shortname = 'pewniak747-info'; // required: replace example with your forum shortname
  
  /* * * DON'T EDIT BELOW THIS LINE * * */
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>
Please enable JavaScript to view the
<a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a>
</noscript>
<a class='dsq-brlink' href='http://disqus.com'>
comments powered by
<span class='logo-disqus'>Disqus</span>
</a>
</section>
</article>

</section>
</div>
</body>
</html>
